<!--Aula: Monitorando mudanças -->
<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">

<div id="app">
    <button v-on:click="incrementarNumero">Aumentar número</button>
    <button v-on:click="diminuirNumero">Diminuir número</button>
    <button v-on:click="zeraNumero">Zerar número</button>
    <p>Número: {{numero}}</p>
    <p>Resultado computed: {{resultadoNumeroComp}}</p>

</div>

<script>
    new Vue({
        el: '#app',
        data:{
            numero: 0
        },
        watch: {
            // watch monitora mudanças no atributo numero e pode tratar a mudança de forma assincrona.
            numero(novo, antigo){
                console.log("antigo: "+antigo+ "| novo: " +novo)
                setTimeout(time =>{ // Um time para mostra no console.
                    console.log('watch: Mensagem assincrona enviada após 3 segundos')
                    this.numero = 0 // Volta a zera o contador após 2 segundos.
                }, 300000)
            }
        },
        computed: {
            resultadoNumeroComp(){
                console.log('Função computed resultadoNumeroComp() foi chamada pois realmente houve mudança no valor do numero.')
                console.log('Computed é processado de forma sincrona.')
                return this.numero < 5 ? 'o número 1 é menor que 5' : 'o número 1 é maior que 5'
            }
        },
        methods: {
            incrementarNumero(){
                this.numero++
            },
            diminuirNumero(){
                this.numero--;
            },
            zeraNumero(){
                this.numero = 0
            }
        }
    })
</script>